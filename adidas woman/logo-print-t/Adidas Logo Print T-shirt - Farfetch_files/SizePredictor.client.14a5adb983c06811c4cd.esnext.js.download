(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{2192:function(e,t,i){e.exports={FitPredictor:"_05d9a4"}},2314:function(e,t,i){"use strict";i.r(t);var r=i(1),s=i.n(r),d=i(0),o=i(8),a=i(159),n=i(5),c=i(1166),l=i(2192),u=i.n(l),p=i(217);class b extends r.Component{componentDidMount(){this.props.loaded||this.props.getFitPredictorFile()}UNSAFE_componentWillReceiveProps(e){if((e.userContext.isLoggedIn||!1===e.userContext.isLoggedIn)&&!e.set&&e.loaded){e.setFitPredictor({alternative:e.alternative,siteContext:e.siteContext,pageContext:e.pageContext,productContext:e.productContext,userContext:e.userContext,sizeSystemId:e.sizeSystemId}),ssp("start","fitpredictor");const t={load:"fitPredictorLoaded",click:"fitPredictorClicked",prediction:"fitPredictorPrediction",selectedBrand:"fitPredictorBrand",selectedCategory:"fitPredictorCategory",selectedSize:"fitPredictorSize"};Object.keys(t).map(e=>this.sspSubscribe(e,t[e]))}}render(){return Object(d.f)("div",{className:u.a.FitPredictor},Object(d.f)("div",{className:"fp-root","data-product-id":this.props.productContext.id}))}addFitPredictorEvents(e,t){"fitPredictorClicked"===e&&this.props.isMobile&&this.scrollToFitPredictor(),this.props.fitPredictorEvents({event:e,value:t})}scrollToFitPredictor(){const e=document.getElementById("FitPredictor-"+this.props.productContext.id);Object(p.a)(e,50)}sspSubscribe(e,t){ssp("subscribe",e,i=>{let r;switch(e){case"load":if(i.supported)return this.addFitPredictorEvents(t,this.props.productContext.id);break;case"prediction":if("size"===i.type)return this.props.fitPredictorPrediction(i),this.addFitPredictorEvents("fitPredictorPersonalizedPrediction",i.size);setTimeout(()=>{if(document.getElementsByClassName("fp-size")[0])return r=document.getElementsByClassName("fp-size")[0].textContent,this.addFitPredictorEvents("fitPredictorUniversalPrediction",r)},1e3);break;case"selectedBrand":return this.addFitPredictorEvents(t,i.brand);case"selectedCategory":return this.addFitPredictorEvents(t,i.category);case"selectedSize":return this.addFitPredictorEvents(t,i.size);default:return this.addFitPredictorEvents(t,this.props.productContext.id)}})}}const P=e=>({channel:e.browser.mediaType,currency:e.productViewModel.priceInfo.default.currencyCode,language:e.culture.language,market:e.culture.countryCode}),g=e=>({breadcrumbs:e.productViewModel.breadcrumb,type:"pdp"});var f=Object(o.b)(e=>{return{loaded:e.productViewModel.fitPredictor.loaded,set:e.productViewModel.fitPredictor.set,alternative:Object(n.v)(e).alternative,sizeSystemId:Object(n.v)(e).sizeSystemId,isMobile:e.browser.lessThan.md,siteContext:P(e),pageContext:g(e),productContext:(i=e.productViewModel,{id:i.details.productId,designerStyleId:i.designerDetails.designerStyleId,brand:i.designerDetails.name,name:i.details.shortDescription,categories:i.categories.all,gender:i.details.gender,ageGroup:i.details.ageGroup,sizes:{available:i.sizes.available,sizeSystem:i.sizes.friendlyScaleName},price:i.priceInfo.default.finalPrice}),userContext:(t=e.user,{idHash:t.userHash,emailHash:t.hashedSHA256Email,isLoggedIn:t.isLoggedIn})};var t,i},e=>({getFitPredictorFile:()=>{e(a.d.getFitPredictorFile())},setFitPredictor:t=>{e(a.d.setFitPredictor(t))},fitPredictorEvents:t=>{e(a.d.events(t))},fitPredictorPrediction:t=>{e(c.b.predictionEmited(t))}}))(b),h=i(3),m=i.n(h);const v=({allProductIds:e,currentProductId:t,mainThumbnail:i,shopCountry:s,shopLanguage:d,sizes:o})=>(Object(r.useEffect)(()=>{window.fitAnalytics={allProductIds:e,currentProductId:t,mainThumbnail:i,shopCountry:s,shopLanguage:d,sizes:o}},[e,t,i,s,d,o]),null);v.propTypes={allProductIds:m.a.arrayOf(m.a.number),currentProductId:m.a.number,mainThumbnail:m.a.string,shopCountry:m.a.string,shopLanguage:m.a.string,sizes:m.a.arrayOf(m.a.shape({availability:m.a.shape({size:m.a.object,value:m.a.bool}),values:m.a.arrayOf(m.a.string)}))};var y=Object(o.b)(e=>Object(n.u)(e))(v);var C=Object(o.b)(e=>({hasFitAnalytics:!!Object(n.u)(e).sizes,hasFitPredictor:Object(n.v)(e).isContextValid}))(({hasFitAnalytics:e,hasFitPredictor:t})=>Object(d.f)(s.a.Fragment,null,t&&Object(d.f)(f,null),e&&Object(d.f)(y,null)));i.d(t,"default",(function(){return C}))}}]);